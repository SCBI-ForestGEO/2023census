censusType,errorID,errorType,errorName,referenceTable,referenceTableFilter,referenceTableSelect,currentTable,currentTableFilter,currentTableSelect,idxError,errorDescription
both,1,error,duplicatedStemTags,stem,1:nrow(referenceTable),,stem,"duplicated(paste(tag, StemTag))","paste(tag, StemTag)","paste(reference$tag, reference$StemTag) %in% current",Make sure no stem was recorded more than once
both,2,error,missedStem,mainCensus,quadrat %in% currentTable$quadrat,"paste(tag, StemTag)",stem,1:nrow(currentTable),"paste(tag, StemTag)",!reference %in% current,Make sure no stem were missed in the quadrats already censused
both,3,warning,suspiciousNegativeGrowth,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,dbh_previous*.972 > dbh_current & !is.na(dbh_previous) & !is.na(dbh_current),"paste(tag, StemTag)",reference %in% current,Check for diameters that decrease too much
both,4,warning,suspiciousPositiveGrowth,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,dbh_previous*1.125 < dbh_current & !is.na(dbh_previous) & !is.na(dbh_current),"paste(tag, StemTag)",reference %in% current,Check for diameters that increase too much
both,5,error,missingDBH,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,!is.na(dbh_previous) & is.na(dbh_current),"paste(tag, StemTag)",reference %in% current,Check that all DBH were measured
both,6,error,unjustifiedZeroDBH,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"dbh_current %in% 0 & !grepl('\\<C\\>|\\<X\\>', codes_current)","paste(tag, StemTag)",reference %in% current,Check that dbh=0 is justified by X or C in codes
both,7,error,missingCrownPosition,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"is.na(crown_position) & status_current %in% c('A',  'DS')","paste(tag, StemTag)",reference %in% current,"Check that crown position was recorded if status is A, or DS"
both,8,warning,deadButNowAlive,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"(grepl('D', status_previous) & status_current %in% c('A')) | (grepl('D',status_2021) & status_current %in% c('A'))","paste(tag, StemTag)",reference %in% current,Check if tree was found alive after being recorded as dead
both,9,error,DCbutNowDS,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"(grepl('DC', status_previous) & status_current %in% c('DS')) | (grepl('DC',status_2021) & status_current %in% c('DS'))","paste(tag, StemTag)",reference %in% current,Check that no down tree is back standing
mortality,10,error,missingPercentCrownIntact,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & is.na(percent_of_crown_intact ) & mort_status %in% c('A', 'AU', 'DS')","paste(tag, StemTag)",reference %in% current,"Check that percent crown intact was recorded if status is A, AU or DS"
mortality,11,error,missingPercentCrownLiving,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & is.na(percent_of_crown_living) & mort_status %in% c('A', 'AU')","paste(tag, StemTag)",reference %in% current,"Check that percent crown living was recorded if status is A, AU"
mortality,12,error,DeadButCrownLivingNotZero,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & !is.na(percent_of_crown_living) & percent_of_crown_living > 0 & !mort_status %in% c('A', 'AU')","paste(tag, StemTag)",reference %in% current,Check that percent crown living is 0 if tree is dead
mortality,13,error,CrownLivingGreaterThanCrownIntact,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & !is.na(percent_of_crown_living) &  !is.na(percent_of_crown_intact) & percent_of_crown_living <= percent_of_crown_intact & mort_status %in% c('A', 'AU', 'DS')","paste(tag, StemTag)",reference %in% current,Check that percent crown living is smaller than percent crown intact
mortality,14,error,statusAbutUnhealthy,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,mortality %in% 1 & mort_status %in% c('A') & (!is.na(fad) | !is.na(wounded_main_stem) | !is.na(rotting_trunk) | !is.na(canker_swelling_deformity)),"paste(tag, StemTag)",reference %in% current,Check that status is AU when obvious signs of health issues
mortality,15,error,AlivebutDWRselected,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & mort_status %in% c('A', 'AU') & dead_with_resprout %in% TRUE","paste(tag, StemTag)",reference %in% current,"Check that if status is A or AU, dead with resprout is not TRUE"
mortality,16,error,missingFad,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & mort_status %in% c('AU','DS', 'DC') & (is.na(fad) & is.na(wounded_main_stem) & !is.na(rotting_trunk) & is.na(canker_swelling_deformity))","paste(tag, StemTag)",reference %in% current,"Check that if status is  AU, DS or DC, there is a fad justifying it"
mortality,17,error,missingWoundLevel,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & grepl('W', fad) & is.na(wounded_main_stem)","paste(tag, StemTag)",reference %in% current,Check that there is a wound level when W in FAD
mortality,18,error,missingWinFad,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & !grepl('W', fad) & !is.na(wounded_main_stem)","paste(tag, StemTag)",reference %in% current,Check that there is a W in FAD if a there is wound level 
mortality,19,error,missingCankerLevel,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & grepl('K', fad) & is.na(canker_swelling_deformity)","paste(tag, StemTag)",reference %in% current,Check that there is a canker_swelling_deformity level when K in FAD
mortality,20,error,missingKinFad,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & !grepl('K', fad) & !is.na(canker_swelling_deformity)","paste(tag, StemTag)",reference %in% current,Check that there is a K in FAD if a there is canker_swelling_deformity  level
mortality,21,error,missingRotLevel,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & grepl('\\<R\\>', fad) & is.na(rotting_trunk)","paste(tag, StemTag)",reference %in% current,Check that there is a rot level when R in FAD
mortality,22,error,missingRinFad,stem,1:nrow(referenceTable),"paste(tag, StemTag)",stem,"mortality %in% 1 & !grepl('\\<R\\>', fad) & !is.na(rotting_trunk)","paste(tag, StemTag)",reference %in% current,Check that there is a R in FAD if a there is rot level 
